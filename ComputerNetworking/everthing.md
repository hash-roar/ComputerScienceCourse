## 总览
### tcp提供的服务

	1.可靠地、按顺序地传送数据:确认和重传
	2.流量控制:发送方不会淹没接收方
	3.拥塞控制当网络拥塞时，发送方降低发送速率

### 分组交换特点

	网络带宽资源不再分分为一个个片，传输时使用全部带宽
	主机之间传输的数据被分为一个个分组
	存储-转发：分组每次移动一跳（ hop ）
	在转发之前，节点必须收到整个分组
	延迟比线路交换要大
	排队时间

### 分组交换:排队延迟和丢失

	如果到达速率>链路的输出速率:
	分组将会排队，等待传输
	如果路由器的缓存用完了，分组将会被抛弃
	四类分组延时:
	1.节点处理延时：
	检查 bit 级差错
	检查分组首部和决定将分组导向何处
	2. 排队延时
	 在输出链路上等待传输的时间
	 依赖于路由器的拥塞程度
	3. 传输延时 :
	R= 链路带宽 (bps)
	L= 分组长度 (bits)
	将分组发送到链路上的时间 = L/R
	存储转发延时
	4. d = 物理链路的长度
	s = 在媒体上的传播速度(~2x10 8 m/sec)
	 传播延时 = d/s
#### 排队延时

	R= 链路带宽 (bps)
	L= 分组长度 (bits)
	a= 分组到达队列的平均
	速率
	流量强度 = La/R
	La/R ~ 0: 平均排队延时很小
	La/R -> 1: 延时变得很大
	La/R > 1: 比特到达队列的速率超过了从该队
	列输出的速率，平均排队延时将趋向无穷大！
### 数据报

	在通信之前 , 无须建立起一个连接 , 有数据就传输
	每一个分组都独立路由 ( 路径不一样 , 可能会失序 )
	路由器根据分组的目标地址进行路由

### Internet协议栈

	应用层 : 网络应用
	为人类用户或者其他应用进程提供网络应用服务
	FTP, SMTP, HTTP,DNS
	
	传输层 : 主机之间的数据传输
	在网络层提供的端到端通信基础上，细分为进程
	到进程，将不可靠的通信变成可靠地通信
	 TCP, UDP
	 
	网络层 : 为数据报从源到目的选择路由
	主机主机之间的通信，端到端通信，不可靠
	 IP, 路由协议
	 
	链路层 : 相邻网络节点间的数据传输
	2 个相邻 2 点的通信，点到点通信，可靠或不可靠
	 点对对协议 PPP, 802.11(wifi), Ethernet
	 
	 物理层 : 在线路上传送 bit
	各层次协议数据单元
	应用层：报文 (message)
	传输层：报文段 (segment) ： TCP 段， UDP 数据报
	网络层：分组 packet （如果无连接方式：数据报
	datagram ）
	数据链路层：帧 (frame)
	物理层：位 (bit)

### 习题

	1.电路交换比分组交换好的地方是什么?
	answer:电路交换⽹络可以在响应时间内保证⼀定量的端到端带宽。如今⼤部分分组交换⽹络（包括因特⽹）⽆法保证端到端带宽
	2.分组交换端到端延时成分有哪些
	answer:延迟组件包括处理延迟、传输延迟、传播延迟、排队延迟。除了排队延迟是变量其他的都是固定的
	3.长度为L分组经距离为d链路传播,速度为v,传播速率为R,需要多长时间?
	answer:d/v
	4.

### 分布式进程间通信问题

	1进程标示和寻址问题
	2传输层 - 应用层提供服务是如何
	3如何使用传输层提供的服务，实现应用进
程之间的报文交换，实现应用
	解决:
	1:进程由ip+port标识
	2:层间接口必须要携带的信息
	要传输的报文（对于本层来说： SDU ）
	谁传的：对方的应用进程的标示： IP+TCP(UDP) 端口
	传给谁：对方的应用进程的标示：对方的 IP+TCP(UDP) 端口号
	3: 定义应用层协议：报文格式，解释，时序等
	编制程序，通过 API 调用网络基础设施提供通信
	服务传报文，解析报文，实现应用时序等

###套接字
 如果 Socket API 每次传输报文，都携带如此多的信息，太繁琐易错，不便于管理

用个代号标示通信的双方或者单方： socket

 TCP socket ：
  TCP 服务，两个进程之间的通信需要之前要建立连接
  
  两个进程通信会持续一段时间，通信关系稳定
  
可以用一个整数表示两个应用实体之间的通信关系
，本地标示穿过层间接口的信息量最小

TCP socket ：源 IP, 源端口，目标 IP ，目标 IP, 目标
端口

### 传输层提供的服务

	TCP 服务：
	 可靠的传输服务
	 流量控制：发送方不会淹
	没接受方
	 拥塞控制：当网络出现拥
	塞时，能抑制发送方
	 不能提供的服务：时间保
	证、最小吞吐保证和安全
	 面向连接：要求在客户端
	进程和服务器进程之间建
	立连接

### http

	HTTP: 超文本传输协议
	 Web 的应用层协议
	 客户 / 服务器模式
	 客户 : 请求、接收和显示
	Web 对象的浏览器
	 服务器 : 对请求进行响应，
	发送对象的 Web 服务

	1.非持久http:
	 最多只有一个对象在
	TCP 连接上发送
	 下载多个对象需要多
	个 TCP 连接
	 HTTP/1.0 使用非持
	久连接
	2:持久http:
	多个对象可以在一个
	（在客户端和服务器
	之间的） TCP 连接上
	传输
	 HTTP/1.1 默认使用
	持久连接
	(持久连接又分为非流水方式和流水方式)

### ftp文件传输协议

	端口号:21
	协议:tcp

###dns(udp)

	IP 地址标识主机、路由器
	 但 IP 地址不好记忆，不便人类使用 ( 没有意义 )
	 人类一般倾向于使用一些有意义的字符串来标识
	Internet 上的设备
	存在着“字符串” —IP 地址的转换的必要性
	DNS 的主要思路:
	 分层的、基于域的命名机制
	 若干分布式的数据库完成名字到 IP 地址的转换
	 运行在 UDP 之上端口号为 53 的应用服务
	 核心的 Internet 功能，但以应用层协议实现
	本地名字服务器:
	 并不严格属于层次结构
	每个 ISP ( 居民区的 ISP 、公司、大学）都有一
	个本地 DNS 服务器
	也称为“默认名字服务器”
	当一个主机发起一个 DNS 查询时，查询被送到
	其本地 DNS 服务器
	起着代理的作用，将查询转发到层次结构中

### socket编程
	1 ：服务器进程必须先处于运行状态
	 创建欢迎 socket
	 和本地端口捆绑
	 在欢迎 socket 上阻塞式等待接收
	用户的连接
	客户端主动和服务器建立连接：
	2 ：创建客户端本地套接字（隐式捆
	绑到本地 port ）
	 指定服务器进程的 IP 地址和端口
	号，与服务器进程连接
	4 ：连接 API 调用有效时，客户端 P 与
	服务器建立了 TCP 连接
	3 ：当与客户端连接请求到来时
	 服务器接受来自用户端的请求
	，解除阻塞式等待，返回一个
	新的 socket （与欢迎 socket 不
	一样），与客户端通信
	 允许服务器与多个客户端
	通信
	 使用源 IP 和源端口来区分
	不同的客户端